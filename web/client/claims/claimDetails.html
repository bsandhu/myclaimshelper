<head>
    <script src="../../../lib/require.js"></script>
    <script src="../../../lib/requireConfig.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/app.css"/>
</head>

<body>
<h1>Claim Details</h1>

<div>
    <div class="inline narrow">Id</div>
    <div class="inline" data-bind="text: claim._id"></div>
</div>
<div>
    <div class="inline narrow">Entry date</div>
    <div class="inline" data-bind="text: claim.entryDate"></div>
</div>
<div>
    <div class="inline narrow">Description</div>
    <div class="inline" data-bind="text: claim.description"></div>
</div>

<hr/>
<b>Log</b>

<div data-bind="foreach: claimEntries">
    <div data-bind="text: entryDate"></div>
    <div data-bind="text: description  "></div>
</div>

<div data-bind="if: showNewClaimEntryForm">
    <hr/>
    <div>
        <input type="text" data-bind="datepicker: {}, value: claimEntry.entryDate"/>
    </div>
    <div>
        <textarea data-bind="value: claimEntry.description" placeholder="Note"></textarea>
    </div>
    <input type="button" data-bind="button: {label: 'Save'}, click: onSave"/>
</div>

<input type="button" data-bind="button: {label: 'Add new'}, click: addNewClaimEntry"/>

</body>

<script type="application/javascript">
    require(['jquery', 'knockout', 'claims/ClaimDetailsVM', 'jquery-ui', 'knockout-jqueryui'],
            function ($, ko, ClaimDetailsVM) {
                console.log('Init KnockOut');
                var claimId = location.href.split('_id=')[1];
                ko.applyBindings(new ClaimDetailsVM(claimId));
            });

</script>



