<head xmlns="http://www.w3.org/1999/html">
    <script src="../../../lib/require.js"></script>
    <script src="../../../lib/requireConfig.js"></script>
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap-theme.css">
    <link rel="stylesheet" type="text/css" href="../../css/jquery.datetimepicker.css">
    <link rel="stylesheet" type="text/css" href="../../css/app.css">
</head>

<body>

<div class="inline" style="width: 98%">
    <div class="inline">
        <a href="#/home">
            <div class="headerLogo">Agent</div>
        </a>
    </div>
    <!-- **** Notifications **** -->
    <div data-bind="module: {name: 'app/viewModels/notifierVM', template: 'app/views/notifier'}"
         class="inline" style="width: 50%"></div>
</div>


<div class="sectionSeparator"></div>

<div style="display: inline-flex; width: 100%; height: 90%; vertical-align: top; white-space: nowrap">


    <!-- **** Search panel **** -->
    <div id="searchPanel" class="slidingContainer" style="background-color: #428bca; width: 20%">

        <!-- Menu icon -->
        <div class="inline alignRight">
            <div class="inline glyphicon glyphicon-th-list"
                 style="cursor: pointer"
                 data-bind="click: toggleSearchPanel"></div>
        </div>

        <!-- Panel content -->
        <div id="searchPanelContent">
            <div class="inline" style="width: 100%">
                <div class="inline" style="width: 60%">
                    <button type="button" class="btn btn-default" style="width: 100%" data-bind="click: onAddNewClaim">
                        <span class="glyphicon glyphicon-plus"></span>
                        <span class="leftMargin">New Claim</span>
                    </button>
                </div>
            </div>

            <div class="panelItem">
                <div><b>Status</b></div>
                <div style="width: 100%" class="inline">
                    <div class="inline">All</div>
                    <div class="badge alignRight">123</div>
                </div>
                <div></div>
                <div style="width: 100%" class="inline">
                    <div class="inline">Active</div>
                    <div class="badge alignRight">45</div>
                </div>
            </div>

            <div class="panelItem">
                <div>Action required</div>
                <div>Waiting for others</div>
                <div>Due soon</div>
            </div>

            <div class="panelItem">
                <div><b>Date</b></div>
                <div>Past 2 weeks</div>
            </div>
        </div>

        <!-- Collapsed label -->
        <div id="searchPanelCollapsedContent" class="collapsedcontainer"
             data-bind="click: toggleSearchPanel">
            <div class="collapsedcontainerLabel">Search</div>
        </div>

    </div>

    <!-- **** Claims list **** -->
    <div id="gridPanel" class="slidingContainer" style="width: 80%; background-color: #F8F8FA">

        <!-- Menu icon -->
        <div class="alignRight">
            <div class="inline glyphicon glyphicon-th-list"
                 style="cursor: pointer"
                 data-bind="click: toggleGridPanel"></div>
        </div>
        <div class="clear bottomMargin"></div>

        <div id="gridPanelContent">
            <div class="alignRight">
                <input class="searchBox" style="width: 15pc" placeholder="Search..."
                       data-bind="value: searchText, valueUpdate: 'afterkeydown'"/>
                <span><a href="#" data-bind="click: onSearchClear">Clear</a></span>
            </div>
            <div class="clear bottomMargin"></div>

            <table class="table table-hover table-condensed">
                <thead>
                <th>Id</th>
                <th>Description</th>
                </thead>

                <tbody data-bind="foreach : {data: searchResults, as: 'claim'}">
                <tr data-bind="click: $parent.onClaimSelect">
                    <td data-bind="text: claim._id" class="gridCell"></td>
                    <td data-bind="text: claim.description" class="gridCell"></td>
                </tr>
                </tbody>
            </table>
        </div>

        <div id="gridPanelCollapsedContent" class="collapsedcontainer"
             data-bind="click: toggleGridPanel">
            <div class="collapsedcontainerLabel">Search Results</div>
        </div>
    </div>

    <!-- **** Claim module **** -->
    <div id="claimPanel" class="slidingContainer" style="width: 0%; background-color: #EBF2F7">

        <div id="claimPanelContent">
            <div data-bind="module: {name: 'app/viewModels/claimVM', template: 'app/views/claim',
                                    afterRender: startRouter}"></div>
        </div>
    </div>

    <!-- **** Claim Entry module **** -->
    <div id="claimEntryPanel" class="slidingContainer" style="width: 0%; background-color: #EDEDED">

        <div id="claimEntryPanelContent">
            <div data-bind="module: {name: 'app/viewModels/claimEntryVM', template: 'app/views/claimEntry'}"></div>
        </div>
    </div>
</div>

<span style="float: right; margin-right: 3px; color: darkgray"><i>Logicube 2014</i></span>

</body>

<script type="application/javascript">
    /**
     * Load libs and init Knockout - on app startup. See requireConfig.js
     */
    require(['jquery', 'knockout', 'KOAmd', 'text', 'amplify', 'app/viewModels/appVM',
             'app/utils/events', 'app/utils/koDatetimePickerBinding', 'velocity'],
            function ($, ko, KOAmd, text, amplify, AppVM) {
                console.log('Init App');

                // Knockout AMD supoprt setup
                ko.amdTemplateEngine.defaultRequireTextPluginName = "text";
                ko.amdTemplateEngine.defaultPath = "/";
                ko.amdTemplateEngine.defaultSuffix = ".tmpl.html";

                // Register components
                ko.components.register('contact-component', {require: 'app/components/contact/contactComponent'});
                ko.components.register('file-upload-component', {require: 'app/components/fileUpload/fileUploadComponent'});

                // Knockout bindings init
                ko.applyBindings(new AppVM());
            });
</script>
