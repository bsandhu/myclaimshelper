<head>
    <script src="../../../lib/require.js"></script>
    <script src="../../../lib/requireConfig.js"></script>
    <link rel="stylesheet" type="text/css" href="../../css/app.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/jquery-ui.css">
</head>

<body>
<h1>Claim Details</h1>

<div>
    <div class="inline narrow">Id</div>
    <div class="inline" data-bind="text: claim._id"></div>
</div>
<div>
    <div class="inline narrow">Entry date</div>
    <div class="inline" data-bind="text: claim.entryDate"></div>
</div>
<div>
    <div class="inline narrow">Description</div>
    <!--<div class="inline" data-bind="text: claim.description"></div>-->
    <input type="text" class="inline" data-bind="value: claim.description"></div>
</div>

<hr/>
<h2>Tasks</h2>

<div data-bind="foreach: {data: claim.tasks, as: 'task'} ">
    <div class="inline">
        <div class="inline label">Entry Date</div>
        <div class="inline" data-bind="text: task.entryDate"></div>
    </div>
    <div class="clear"></div>
    <div class="inline">
        <div class="inline label">Due Date</div>
        <div class="inline" data-bind="text: task.entryDate"></div>
    </div>
    <div class="clear"></div>
    <div class="inline">
        <div class="inline label">Description</div>
        <div class="inline" data-bind="text: task.description"></div>
    </div>
    <div style="height: 5px"></div>
</div>

<div data-bind="if: showNewTaskForm">
    <hr/>
    <div class="inline">
        <div class="inline label narrow">Entered on</div>
        <div class="inline narrow">
            <input type="text" data-bind="datepicker: {}, value: newTask.entryDate"/></div>
    </div>
    <div class="inline">
        <div class="inline label narrow">Due on</div>
        <div class="inline narrow">
            <input type="text" data-bind="datepicker: {}, value: newTask.dueDate"/></div>
    </div>
    <div>
        <div class="inline label narrow">Note</div>
        <div class="inline narrow">
            <textarea style="width: 400px; height: 60px"
                      data-bind="value: newTask.description" placeholder="Note"></textarea>
        </div>
    </div>

    <input type="button" data-bind="button: {label: 'Save'}, click: onSave"/>
    <input type="button" data-bind="button: {label: 'Cancel'}, click: onCancel"/>
</div>

<div style="height: 15px"></div>
<input type="button" data-bind="button: {label: 'Add new'}, click: addNewTask"/>

</body>

<script type="application/javascript">
    require(['jquery', 'knockout', 'app/claims/ClaimVM', 'jquery-ui', 'knockout-jqueryui'],
            function ($, ko, ClaimVM) {
                console.log('Init KnockOut');
                var claimId = location.href.split('_id=')[1];
                ko.applyBindings(new ClaimVM(claimId));
            });

</script>



